{"ast":null,"code":"import _objectSpread from\"C:/Users/indur/Desktop/project managmnet - Copy/project-management-system/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useContext}from'react';import{DarkModeContext}from'../context/DarkModeContext';import{AuthContext}from'../context/AuthContext';import{tasksAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Tasks(){var _darkModeContext$isDa,_adminStats$byStatus,_adminStats$byPriorit,_adminStats$overdueTa;const darkModeContext=useContext(DarkModeContext);const authContext=useContext(AuthContext);const isDarkMode=(_darkModeContext$isDa=darkModeContext===null||darkModeContext===void 0?void 0:darkModeContext.isDarkMode)!==null&&_darkModeContext$isDa!==void 0?_darkModeContext$isDa:false;const user=authContext===null||authContext===void 0?void 0:authContext.user;const[tasks,setTasks]=useState([]);const[loading,setLoading]=useState(true);const[filter,setFilter]=useState('all');const[showModal,setShowModal]=useState(false);const[editingTask,setEditingTask]=useState(null);const[expandedTaskId,setExpandedTaskId]=useState(null);const[adminStats,setAdminStats]=useState(null);const[showAdminPanel,setShowAdminPanel]=useState(false);const[newTask,setNewTask]=useState({_id:'',title:'',description:'',status:'pending',priority:'medium',dueDate:'',assignee:'',subtasks:[],comments:[]});useEffect(()=>{loadTasks();if((user===null||user===void 0?void 0:user.role)==='admin'){loadAdminStats();}},[user]);const loadTasks=async()=>{try{setLoading(true);const res=(await tasksAPI.create)?await tasksAPI.create({}).catch(()=>({data:[]})):{data:[]};setTasks(res.data||[]);}catch(err){console.error('Failed to load tasks:',err);}finally{setLoading(false);}};const loadAdminStats=async()=>{if((user===null||user===void 0?void 0:user.role)!=='admin')return;try{const res=await tasksAPI.adminGetStats();setAdminStats(res.data.stats);}catch(err){console.error('Failed to load admin stats:',err);}};const handleAddTask=async e=>{var _newTask$title;e.preventDefault();if(!((_newTask$title=newTask.title)!==null&&_newTask$title!==void 0&&_newTask$title.trim()))return;try{if(editingTask){// Use admin endpoint if user is admin, otherwise use regular endpoint\nif((user===null||user===void 0?void 0:user.role)==='admin'){await tasksAPI.adminUpdate(editingTask._id,newTask);}else{await tasksAPI.update(editingTask._id,newTask);}}else{await tasksAPI.create(newTask);}loadTasks();if((user===null||user===void 0?void 0:user.role)==='admin'){loadAdminStats();}setNewTask({title:'',description:'',status:'pending',priority:'medium',dueDate:'',assignee:'',subtasks:[],comments:[]});setEditingTask(null);setShowModal(false);}catch(err){console.error('Failed to save task:',err);}};const handleDeleteTask=async taskId=>{if(window.confirm('Are you sure you want to delete this task?')){try{if((user===null||user===void 0?void 0:user.role)==='admin'){await tasksAPI.adminDelete(taskId);}else{await tasksAPI.delete(taskId);}loadTasks();if((user===null||user===void 0?void 0:user.role)==='admin'){loadAdminStats();}}catch(err){console.error('Failed to delete task:',err);}}};const handleEditTask=task=>{setEditingTask(task);setNewTask(task);setShowModal(true);};const handleAddSubtask=()=>{setNewTask(_objectSpread(_objectSpread({},newTask),{},{subtasks:[...(newTask.subtasks||[]),{title:'',completed:false}]}));};const handleUpdateSubtask=(index,updatedSubtask)=>{const updatedSubtasks=[...(newTask.subtasks||[])];updatedSubtasks[index]=updatedSubtask;setNewTask(_objectSpread(_objectSpread({},newTask),{},{subtasks:updatedSubtasks}));};const handleRemoveSubtask=index=>{setNewTask(_objectSpread(_objectSpread({},newTask),{},{subtasks:(newTask.subtasks||[]).filter((_,i)=>i!==index)}));};const handleAddComment=(taskId,comment)=>{const task=tasks.find(t=>t._id===taskId);if(task){handleEditTask(_objectSpread(_objectSpread({},task),{},{comments:[...(task.comments||[]),{text:comment,timestamp:new Date()}]}));}};const getStatusColor=status=>{switch(status){case'completed':return'bg-green-100 text-green-800';case'in-progress':return'bg-blue-100 text-blue-800';case'pending':return'bg-gray-100 text-gray-800';case'overdue':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const getPriorityColor=priority=>{switch(priority){case'critical':return'text-red-600 bg-red-50';case'high':return'text-orange-600 bg-orange-50';case'medium':return'text-yellow-600 bg-yellow-50';case'low':return'text-green-600 bg-green-50';default:return'text-gray-600 bg-gray-50';}};const getPriorityIcon=priority=>{switch(priority){case'critical':return'üî¥';case'high':return'üü†';case'medium':return'üü°';case'low':return'üü¢';default:return'‚ö™';}};const filteredTasks=tasks.filter(task=>{if(filter==='all')return true;if(filter==='my-tasks')return task.assignee==='current-user';if(filter==='overdue')return task.status==='overdue';if(filter==='in-progress')return task.status==='in-progress';if(filter==='completed')return task.status==='completed';return true;});const completionPercentage=Math.round(tasks.filter(t=>t.status==='completed').length/Math.max(tasks.length,1)*100);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen \".concat(isDarkMode?'bg-gray-950':'bg-gray-50'),style:{fontFamily:'Urbanist, sans-serif'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-4xl font-bold \".concat(isDarkMode?'text-white':'text-gray-900',\" mb-2\"),children:[\"\\u2713 Task Management \",(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm bg-red-500 text-white px-2 py-1 rounded\",children:\"Admin\"})]}),/*#__PURE__*/_jsx(\"p\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"Organize and track your project tasks efficiently\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAdminPanel(!showAdminPanel),className:\"px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-xl transition-all\",children:\"\\u2699\\uFE0F Admin Panel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingTask(null);setNewTask({title:'',description:'',status:'pending',priority:'medium',dueDate:'',assignee:'',subtasks:[],comments:[]});setShowModal(true);},className:\"px-6 py-3 bg-gradient-to-r from-[#FF6523] to-[#9C4CE0] text-white font-semibold rounded-xl hover:shadow-lg transition-all\",children:\"+ Create Task\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-4 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-900 border-gray-700':'bg-white border-[#FF6523]/20',\" border rounded-xl p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"Total Tasks\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold \".concat(isDarkMode?'text-white':'text-gray-900'),children:tasks.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-900 border-gray-700':'bg-white border-[#FF6523]/20',\" border rounded-xl p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"In Progress\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-blue-600\",children:tasks.filter(t=>t.status==='in-progress').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-900 border-gray-700':'bg-white border-[#FF6523]/20',\" border rounded-xl p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"Completed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-green-600\",children:tasks.filter(t=>t.status==='completed').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-900 border-gray-700':'bg-white border-[#FF6523]/20',\" border rounded-xl p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"Completion\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-[#FF6523]\",children:[completionPercentage,\"%\"]})]})]}),(user===null||user===void 0?void 0:user.role)==='admin'&&showAdminPanel&&adminStats&&/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-900 border-gray-700':'bg-white border-red-200',\" border-2 rounded-2xl p-6 mb-6\"),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"\\uD83D\\uDCCA Admin Control Panel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-800':'bg-red-50',\" p-4 rounded-lg\"),children:[/*#__PURE__*/_jsx(\"p\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"Tasks by Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 space-y-1 text-sm\",children:adminStats===null||adminStats===void 0?void 0:(_adminStats$byStatus=adminStats.byStatus)===null||_adminStats$byStatus===void 0?void 0:_adminStats$byStatus.map(item=>/*#__PURE__*/_jsxs(\"p\",{className:isDarkMode?'text-gray-300':'text-gray-700',children:[item._id,\": \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:item.count})]},item._id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-800':'bg-red-50',\" p-4 rounded-lg\"),children:[/*#__PURE__*/_jsx(\"p\",{className:isDarkMode?'text-gray-400':'text-gray-600',children:\"Tasks by Priority\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 space-y-1 text-sm\",children:adminStats===null||adminStats===void 0?void 0:(_adminStats$byPriorit=adminStats.byPriority)===null||_adminStats$byPriorit===void 0?void 0:_adminStats$byPriorit.map(item=>/*#__PURE__*/_jsxs(\"p\",{className:isDarkMode?'text-gray-300':'text-gray-700',children:[item._id,\": \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:item.count})]},item._id))})]}),(adminStats===null||adminStats===void 0?void 0:adminStats.overdueTasks)&&adminStats.overdueTasks>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2 \".concat(isDarkMode?'bg-red-900/30':'bg-red-50',\" p-4 rounded-lg border-l-4 border-red-500\"),children:[/*#__PURE__*/_jsxs(\"p\",{className:\"\".concat(isDarkMode?'text-red-400':'text-red-600',\" font-bold\"),children:[\"\\u26A0\\uFE0F \",adminStats.overdueTasks,\" Overdue Tasks\"]}),adminStats===null||adminStats===void 0?void 0:(_adminStats$overdueTa=adminStats.overdueTasksList)===null||_adminStats$overdueTa===void 0?void 0:_adminStats$overdueTa.slice(0,3).map(task=>{var _task$assignee;return/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm mt-1 \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:[\"\\u2022 \",task.title,\" (Assigned to: \",typeof task.assignee==='string'?task.assignee:((_task$assignee=task.assignee)===null||_task$assignee===void 0?void 0:_task$assignee.name)||'Unassigned',\")\"]},task._id);})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-900 border-gray-700':'bg-white border-[#FF6523]/20',\" border rounded-2xl p-6 mb-6\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 flex-wrap\",children:[{id:'all',label:'All Tasks',icon:'üìã'},{id:'my-tasks',label:'My Tasks',icon:'üë§'},{id:'in-progress',label:'In Progress',icon:'‚è≥'},{id:'completed',label:'Completed',icon:'‚úÖ'},{id:'overdue',label:'Overdue',icon:'‚ö†Ô∏è'}].map(f=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilter(f.id),className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(filter===f.id?'bg-gradient-to-r from-[#FF6523] to-[#9C4CE0] text-white':isDarkMode?'bg-gray-800 hover:bg-gray-700 text-gray-200':'bg-gray-100 hover:bg-gray-200 text-gray-800'),children:[f.icon,\" \",f.label]},f.id))})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF6523]\"})}):filteredTasks.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:filteredTasks.map(task=>/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-900 border-gray-700':'bg-white border-gray-200',\" border rounded-xl transition-all\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 cursor-pointer hover:opacity-75\",onClick:()=>setExpandedTaskId(expandedTaskId===task._id?null:task._id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-bold \".concat(getStatusColor(task.status)),children:task.status}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-bold \".concat(getPriorityColor(task.priority)),children:[getPriorityIcon(task.priority),\" \",task.priority]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold \".concat(isDarkMode?'text-white':'text-gray-900'),children:task.title}),task.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2 \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:task.description}),task.dueDate&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm mt-2 \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:[\"\\uD83D\\uDCC5 Due: \",new Date(task.dueDate).toLocaleDateString()]}),task.subtasks&&task.subtasks.length>0&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm mt-2 \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:[\"Subtasks: \",task.subtasks.filter(s=>s.completed).length,\"/\",task.subtasks.length]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 ml-4 flex-wrap\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleEditTask(task);},className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(isDarkMode?'bg-gray-800 hover:bg-gray-700 text-gray-200':'bg-gray-100 hover:bg-gray-200'),children:\"\\u270F\\uFE0F Edit\"}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();// Show admin edit modal with all fields\nsetEditingTask(task);setNewTask(_objectSpread(_objectSpread({},task),{},{dueDate:task.dueDate?new Date(task.dueDate).toISOString().split('T')[0]:''}));setShowModal(true);},className:\"px-4 py-2 rounded-lg font-medium transition-all bg-red-600 hover:bg-red-700 text-white\",children:\"\\uD83D\\uDD27 Admin Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleDeleteTask(task._id);},className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(isDarkMode?'bg-red-900/20 hover:bg-red-900/30 text-red-400':'bg-red-100/50 hover:bg-red-100'),children:\"\\uD83D\\uDDD1\\uFE0F Delete\"})]})]})}),expandedTaskId===task._id&&/*#__PURE__*/_jsxs(\"div\",{className:\"border-t \".concat(isDarkMode?'border-gray-700 bg-gray-800/50':'border-gray-200 bg-gray-50',\" p-6\"),children:[task.subtasks&&task.subtasks.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold mb-3 \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"\\uD83D\\uDCDD Subtasks\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:task.subtasks.map((subtask,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:subtask.completed||false,readOnly:true,className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:subtask.completed?'line-through':'',children:subtask.title})]},idx))})]}),task.comments&&task.comments.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-bold mb-3 \".concat(isDarkMode?'text-white':'text-gray-900'),children:[\"\\uD83D\\uDCAC Comments (\",task.comments.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:task.comments.map((comment,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-lg \".concat(isDarkMode?'bg-gray-700/30':'bg-white'),children:[/*#__PURE__*/_jsx(\"p\",{className:isDarkMode?'text-gray-300':'text-gray-700',children:comment.text}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(isDarkMode?'text-gray-500':'text-gray-500'),children:new Date(comment.timestamp).toLocaleString()})]},idx))})]})]})]},task._id))}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 rounded-xl \".concat(isDarkMode?'bg-gray-900 border border-gray-700':'bg-gray-50 border border-gray-200'),children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg \".concat(isDarkMode?'text-gray-400':'text-gray-600'),children:[\"No tasks found. \",filter!=='all'&&'Try adjusting your filters.']})})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(isDarkMode?'bg-gray-900':'bg-white',\" rounded-2xl max-w-2xl w-full max-h-96 overflow-y-auto\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold \".concat(isDarkMode?'text-white':'text-gray-900'),children:editingTask?'Edit Task':'Create New Task'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowModal(false),className:\"text-2xl\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddTask,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Task Title\",value:newTask.title,onChange:e=>setNewTask(_objectSpread(_objectSpread({},newTask),{},{title:e.target.value})),className:\"w-full px-4 py-2 rounded-lg border \".concat(isDarkMode?'bg-gray-800 border-gray-700 text-white':'bg-gray-50 border-gray-200',\" focus:outline-none focus:border-[#FF6523]\"),required:true}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\",value:newTask.description,onChange:e=>setNewTask(_objectSpread(_objectSpread({},newTask),{},{description:e.target.value})),className:\"w-full px-4 py-2 rounded-lg border \".concat(isDarkMode?'bg-gray-800 border-gray-700 text-white':'bg-gray-50 border-gray-200',\" focus:outline-none focus:border-[#FF6523]\"),rows:3}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid \".concat((user===null||user===void 0?void 0:user.role)==='admin'?'grid-cols-4':'grid-cols-3',\" gap-4\"),children:[/*#__PURE__*/_jsxs(\"select\",{value:newTask.status,onChange:e=>setNewTask(_objectSpread(_objectSpread({},newTask),{},{status:e.target.value})),className:\"px-4 py-2 rounded-lg border \".concat(isDarkMode?'bg-gray-800 border-gray-700 text-white':'bg-gray-50 border-gray-200',\" focus:outline-none\"),children:[/*#__PURE__*/_jsx(\"option\",{value:\"todo\",children:\"To Do\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in-progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"review\",children:\"Review\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:newTask.priority,onChange:e=>setNewTask(_objectSpread(_objectSpread({},newTask),{},{priority:e.target.value})),className:\"px-4 py-2 rounded-lg border \".concat(isDarkMode?'bg-gray-800 border-gray-700 text-white':'bg-gray-50 border-gray-200',\" focus:outline-none\"),children:[/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",children:\"High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"critical\",children:\"Critical\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newTask.dueDate,onChange:e=>setNewTask(_objectSpread(_objectSpread({},newTask),{},{dueDate:e.target.value})),className:\"px-4 py-2 rounded-lg border \".concat(isDarkMode?'bg-gray-800 border-gray-700 text-white':'bg-gray-50 border-gray-200',\" focus:outline-none\")}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Est. Hours\",value:newTask.estimatedHours||'',onChange:e=>setNewTask(_objectSpread(_objectSpread({},newTask),{},{estimatedHours:parseFloat(e.target.value)||0})),className:\"px-4 py-2 rounded-lg border \".concat(isDarkMode?'bg-gray-800 border-gray-700 text-white':'bg-gray-50 border-gray-200',\" focus:outline-none\")})]}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-semibold \".concat(isDarkMode?'text-red-400':'text-red-700'),children:\"Estimated Hours\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTask.estimatedHours||0,onChange:e=>setNewTask(_objectSpread(_objectSpread({},newTask),{},{estimatedHours:parseFloat(e.target.value)||0})),className:\"w-full px-4 py-2 rounded-lg border mt-1 \".concat(isDarkMode?'bg-gray-800 border-gray-700 text-white':'bg-gray-50 border-gray-200')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-semibold \".concat(isDarkMode?'text-red-400':'text-red-700'),children:\"Actual Hours\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTask.actualHours||0,onChange:e=>setNewTask(_objectSpread(_objectSpread({},newTask),{},{actualHours:parseFloat(e.target.value)||0})),className:\"w-full px-4 py-2 rounded-lg border mt-1 \".concat(isDarkMode?'bg-gray-800 border-gray-700 text-white':'bg-gray-50 border-gray-200')})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddSubtask,className:\"px-4 py-2 rounded-lg font-medium \".concat(isDarkMode?'bg-gray-800 hover:bg-gray-700':'bg-gray-100 hover:bg-gray-200'),children:\"+ Add Subtask\"}),newTask.subtasks&&newTask.subtasks.map((subtask,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Subtask \".concat(idx+1),value:subtask.title,onChange:e=>handleUpdateSubtask(idx,_objectSpread(_objectSpread({},subtask),{},{title:e.target.value})),className:\"flex-1 px-4 py-2 rounded-lg border \".concat(isDarkMode?'bg-gray-800 border-gray-700 text-white':'bg-gray-50 border-gray-200',\" focus:outline-none\")}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleRemoveSubtask(idx),className:\"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600\",children:\"Remove\"})]},idx)),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 px-6 py-3 bg-gradient-to-r from-[#FF6523] to-[#9C4CE0] text-white font-semibold rounded-xl hover:shadow-lg transition-all\",children:editingTask?'Update Task':'Create Task'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowModal(false),className:\"flex-1 px-6 py-3 rounded-xl font-semibold \".concat(isDarkMode?'bg-gray-800 hover:bg-gray-700 text-gray-200':'bg-gray-200 hover:bg-gray-300'),children:\"Cancel\"})]})]})]})})})]});}","map":{"version":3,"names":["React","useState","useEffect","useContext","DarkModeContext","AuthContext","tasksAPI","jsx","_jsx","jsxs","_jsxs","Tasks","_darkModeContext$isDa","_adminStats$byStatus","_adminStats$byPriorit","_adminStats$overdueTa","darkModeContext","authContext","isDarkMode","user","tasks","setTasks","loading","setLoading","filter","setFilter","showModal","setShowModal","editingTask","setEditingTask","expandedTaskId","setExpandedTaskId","adminStats","setAdminStats","showAdminPanel","setShowAdminPanel","newTask","setNewTask","_id","title","description","status","priority","dueDate","assignee","subtasks","comments","loadTasks","role","loadAdminStats","res","create","catch","data","err","console","error","adminGetStats","stats","handleAddTask","e","_newTask$title","preventDefault","trim","adminUpdate","update","handleDeleteTask","taskId","window","confirm","adminDelete","delete","handleEditTask","task","handleAddSubtask","_objectSpread","completed","handleUpdateSubtask","index","updatedSubtask","updatedSubtasks","handleRemoveSubtask","_","i","handleAddComment","comment","find","t","text","timestamp","Date","getStatusColor","getPriorityColor","getPriorityIcon","filteredTasks","completionPercentage","Math","round","length","max","className","concat","style","fontFamily","children","onClick","byStatus","map","item","count","byPriority","overdueTasks","overdueTasksList","slice","_task$assignee","name","id","label","icon","f","toLocaleDateString","s","stopPropagation","toISOString","split","subtask","idx","type","checked","readOnly","toLocaleString","onSubmit","placeholder","value","onChange","target","required","rows","estimatedHours","parseFloat","actualHours"],"sources":["C:/Users/indur/Desktop/project managmnet - Copy/project-management-system/frontend/src/pages/Tasks.tsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { DarkModeContext } from '../context/DarkModeContext';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { tasksAPI } from '../services/api';\r\n\r\ninterface Subtask {\r\n  title: string;\r\n  completed: boolean;\r\n}\r\n\r\ninterface Comment {\r\n  text: string;\r\n  timestamp: Date;\r\n}\r\n\r\ninterface Task {\r\n  _id: string;\r\n  title: string;\r\n  description: string;\r\n  status: string;\r\n  priority: string;\r\n  dueDate: string;\r\n  assignee: string | { name: string };\r\n  subtasks: Subtask[];\r\n  comments: Comment[];\r\n  estimatedHours?: number;\r\n  actualHours?: number;\r\n}\r\n\r\ninterface AdminStats {\r\n  byStatus: Array<{ status: string; count: number }>;\r\n  byPriority: Array<{ priority: string; count: number }>;\r\n  overdueTasks: number;\r\n  overdueTasksList: Task[];\r\n}\r\n\r\nexport default function Tasks() {\r\n  const darkModeContext = useContext(DarkModeContext);\r\n  const authContext = useContext(AuthContext);\r\n  const isDarkMode = darkModeContext?.isDarkMode ?? false;\r\n  const user = authContext?.user;\r\n  const [tasks, setTasks] = useState<Task[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all');\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\r\n  const [expandedTaskId, setExpandedTaskId] = useState<string | null>(null);\r\n  const [adminStats, setAdminStats] = useState<AdminStats | null>(null);\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [newTask, setNewTask] = useState<Partial<Task>>({\r\n    _id: '',\r\n    title: '',\r\n    description: '',\r\n    status: 'pending',\r\n    priority: 'medium',\r\n    dueDate: '',\r\n    assignee: '',\r\n    subtasks: [],\r\n    comments: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadTasks();\r\n    if (user?.role === 'admin') {\r\n      loadAdminStats();\r\n    }\r\n  }, [user]);\r\n\r\n  const loadTasks = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await tasksAPI.create ? await tasksAPI.create({} as any).catch(() => ({ data: [] })) : { data: [] };\r\n      setTasks(res.data || []);\r\n    } catch (err) {\r\n      console.error('Failed to load tasks:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadAdminStats = async () => {\r\n    if (user?.role !== 'admin') return;\r\n    try {\r\n      const res = await tasksAPI.adminGetStats();\r\n      setAdminStats(res.data.stats);\r\n    } catch (err) {\r\n      console.error('Failed to load admin stats:', err);\r\n    }\r\n  };\r\n\r\n  const handleAddTask = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    if (!newTask.title?.trim()) return;\r\n\r\n    try {\r\n      if (editingTask) {\r\n        // Use admin endpoint if user is admin, otherwise use regular endpoint\r\n        if (user?.role === 'admin') {\r\n          await tasksAPI.adminUpdate(editingTask._id, newTask);\r\n        } else {\r\n          await tasksAPI.update(editingTask._id, newTask);\r\n        }\r\n      } else {\r\n        await tasksAPI.create(newTask);\r\n      }\r\n      loadTasks();\r\n      if (user?.role === 'admin') {\r\n        loadAdminStats();\r\n      }\r\n      setNewTask({\r\n        title: '',\r\n        description: '',\r\n        status: 'pending',\r\n        priority: 'medium',\r\n        dueDate: '',\r\n        assignee: '',\r\n        subtasks: [],\r\n        comments: [],\r\n      });\r\n      setEditingTask(null);\r\n      setShowModal(false);\r\n    } catch (err) {\r\n      console.error('Failed to save task:', err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteTask = async (taskId: string) => {\r\n    if (window.confirm('Are you sure you want to delete this task?')) {\r\n      try {\r\n        if (user?.role === 'admin') {\r\n          await tasksAPI.adminDelete(taskId);\r\n        } else {\r\n          await tasksAPI.delete(taskId);\r\n        }\r\n        loadTasks();\r\n        if (user?.role === 'admin') {\r\n          loadAdminStats();\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to delete task:', err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEditTask = (task: Task) => {\r\n    setEditingTask(task);\r\n    setNewTask(task);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleAddSubtask = () => {\r\n    setNewTask({\r\n      ...newTask,\r\n      subtasks: [...(newTask.subtasks || []), { title: '', completed: false }],\r\n    });\r\n  };\r\n\r\n  const handleUpdateSubtask = (index: number, updatedSubtask: Subtask) => {\r\n    const updatedSubtasks = [...(newTask.subtasks || [])];\r\n    updatedSubtasks[index] = updatedSubtask;\r\n    setNewTask({ ...newTask, subtasks: updatedSubtasks });\r\n  };\r\n\r\n  const handleRemoveSubtask = (index: number) => {\r\n    setNewTask({\r\n      ...newTask,\r\n      subtasks: (newTask.subtasks || []).filter((_, i) => i !== index),\r\n    });\r\n  };\r\n\r\n  const handleAddComment = (taskId: string, comment: string) => {\r\n    const task = tasks.find(t => t._id === taskId);\r\n    if (task) {\r\n      handleEditTask({\r\n        ...task,\r\n        comments: [...(task.comments || []), { text: comment, timestamp: new Date() }],\r\n      });\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'in-progress':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'pending':\r\n        return 'bg-gray-100 text-gray-800';\r\n      case 'overdue':\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority: string) => {\r\n    switch (priority) {\r\n      case 'critical':\r\n        return 'text-red-600 bg-red-50';\r\n      case 'high':\r\n        return 'text-orange-600 bg-orange-50';\r\n      case 'medium':\r\n        return 'text-yellow-600 bg-yellow-50';\r\n      case 'low':\r\n        return 'text-green-600 bg-green-50';\r\n      default:\r\n        return 'text-gray-600 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getPriorityIcon = (priority: string) => {\r\n    switch (priority) {\r\n      case 'critical':\r\n        return 'üî¥';\r\n      case 'high':\r\n        return 'üü†';\r\n      case 'medium':\r\n        return 'üü°';\r\n      case 'low':\r\n        return 'üü¢';\r\n      default:\r\n        return '‚ö™';\r\n    }\r\n  };\r\n\r\n  const filteredTasks = tasks.filter(task => {\r\n    if (filter === 'all') return true;\r\n    if (filter === 'my-tasks') return task.assignee === 'current-user';\r\n    if (filter === 'overdue') return task.status === 'overdue';\r\n    if (filter === 'in-progress') return task.status === 'in-progress';\r\n    if (filter === 'completed') return task.status === 'completed';\r\n    return true;\r\n  });\r\n\r\n  const completionPercentage = Math.round(\r\n    (tasks.filter(t => t.status === 'completed').length / Math.max(tasks.length, 1)) * 100\r\n  );\r\n\r\n  return (\r\n    <div className={`min-h-screen ${isDarkMode ? 'bg-gray-950' : 'bg-gray-50'}`} style={{ fontFamily: 'Urbanist, sans-serif' }}>\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* Header */}\r\n        <div className=\"flex justify-between items-start mb-8\">\r\n          <div>\r\n            <h1 className={`text-4xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'} mb-2`}>\r\n              ‚úì Task Management {user?.role === 'admin' && <span className=\"text-sm bg-red-500 text-white px-2 py-1 rounded\">Admin</span>}\r\n            </h1>\r\n            <p className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>\r\n              Organize and track your project tasks efficiently\r\n            </p>\r\n          </div>\r\n          <div className=\"flex gap-3\">\r\n            {user?.role === 'admin' && (\r\n              <button\r\n                onClick={() => setShowAdminPanel(!showAdminPanel)}\r\n                className=\"px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-xl transition-all\"\r\n              >\r\n                ‚öôÔ∏è Admin Panel\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={() => {\r\n                setEditingTask(null);\r\n                setNewTask({\r\n                  title: '',\r\n                  description: '',\r\n                  status: 'pending',\r\n                  priority: 'medium',\r\n                  dueDate: '',\r\n                  assignee: '',\r\n                  subtasks: [],\r\n                  comments: [],\r\n                });\r\n                setShowModal(true);\r\n              }}\r\n              className=\"px-6 py-3 bg-gradient-to-r from-[#FF6523] to-[#9C4CE0] text-white font-semibold rounded-xl hover:shadow-lg transition-all\"\r\n            >\r\n              + Create Task\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats */}\r\n        <div className=\"grid grid-cols-4 gap-4 mb-8\">\r\n          <div className={`${isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-[#FF6523]/20'} border rounded-xl p-6`}>\r\n            <p className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Total Tasks</p>\r\n            <p className={`text-3xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>{tasks.length}</p>\r\n          </div>\r\n          <div className={`${isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-[#FF6523]/20'} border rounded-xl p-6`}>\r\n            <p className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>In Progress</p>\r\n            <p className={`text-3xl font-bold text-blue-600`}>{tasks.filter(t => t.status === 'in-progress').length}</p>\r\n          </div>\r\n          <div className={`${isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-[#FF6523]/20'} border rounded-xl p-6`}>\r\n            <p className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Completed</p>\r\n            <p className={`text-3xl font-bold text-green-600`}>{tasks.filter(t => t.status === 'completed').length}</p>\r\n          </div>\r\n          <div className={`${isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-[#FF6523]/20'} border rounded-xl p-6`}>\r\n            <p className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Completion</p>\r\n            <p className={`text-3xl font-bold text-[#FF6523]`}>{completionPercentage}%</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Admin Panel */}\r\n        {user?.role === 'admin' && showAdminPanel && adminStats && (\r\n          <div className={`${isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-red-200'} border-2 rounded-2xl p-6 mb-6`}>\r\n            <h2 className={`text-2xl font-bold mb-4 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n              üìä Admin Control Panel\r\n            </h2>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className={`${isDarkMode ? 'bg-gray-800' : 'bg-red-50'} p-4 rounded-lg`}>\r\n                <p className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Tasks by Status</p>\r\n                <div className=\"mt-2 space-y-1 text-sm\">\r\n                  {adminStats?.byStatus?.map((item: any) => (\r\n                    <p key={item._id} className={isDarkMode ? 'text-gray-300' : 'text-gray-700'}>\r\n                      {item._id}: <span className=\"font-bold\">{item.count}</span>\r\n                    </p>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              <div className={`${isDarkMode ? 'bg-gray-800' : 'bg-red-50'} p-4 rounded-lg`}>\r\n                <p className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Tasks by Priority</p>\r\n                <div className=\"mt-2 space-y-1 text-sm\">\r\n                  {adminStats?.byPriority?.map((item: any) => (\r\n                    <p key={item._id} className={isDarkMode ? 'text-gray-300' : 'text-gray-700'}>\r\n                      {item._id}: <span className=\"font-bold\">{item.count}</span>\r\n                    </p>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              {adminStats?.overdueTasks && adminStats.overdueTasks > 0 && (\r\n                <div className={`col-span-2 ${isDarkMode ? 'bg-red-900/30' : 'bg-red-50'} p-4 rounded-lg border-l-4 border-red-500`}>\r\n                  <p className={`${isDarkMode ? 'text-red-400' : 'text-red-600'} font-bold`}>\r\n                    ‚ö†Ô∏è {adminStats.overdueTasks} Overdue Tasks\r\n                  </p>\r\n                  {adminStats?.overdueTasksList?.slice(0, 3).map((task: Task) => (\r\n                    <p key={task._id} className={`text-sm mt-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                      ‚Ä¢ {task.title} (Assigned to: {typeof task.assignee === 'string' ? task.assignee : task.assignee?.name || 'Unassigned'})\r\n                    </p>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Filters */}\r\n        <div className={`${isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-[#FF6523]/20'} border rounded-2xl p-6 mb-6`}>\r\n          <div className=\"flex gap-2 flex-wrap\">\r\n            {[\r\n              { id: 'all', label: 'All Tasks', icon: 'üìã' },\r\n              { id: 'my-tasks', label: 'My Tasks', icon: 'üë§' },\r\n              { id: 'in-progress', label: 'In Progress', icon: '‚è≥' },\r\n              { id: 'completed', label: 'Completed', icon: '‚úÖ' },\r\n              { id: 'overdue', label: 'Overdue', icon: '‚ö†Ô∏è' },\r\n            ].map(f => (\r\n              <button\r\n                key={f.id}\r\n                onClick={() => setFilter(f.id)}\r\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\r\n                  filter === f.id\r\n                    ? 'bg-gradient-to-r from-[#FF6523] to-[#9C4CE0] text-white'\r\n                    : isDarkMode\r\n                    ? 'bg-gray-800 hover:bg-gray-700 text-gray-200'\r\n                    : 'bg-gray-100 hover:bg-gray-200 text-gray-800'\r\n                }`}\r\n              >\r\n                {f.icon} {f.label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tasks List */}\r\n        {loading ? (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF6523]\"></div>\r\n          </div>\r\n        ) : filteredTasks.length > 0 ? (\r\n          <div className=\"space-y-4\">\r\n            {filteredTasks.map(task => (\r\n              <div\r\n                key={task._id}\r\n                className={`${isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-gray-200'} border rounded-xl transition-all`}\r\n              >\r\n                <div\r\n                  className=\"p-6 cursor-pointer hover:opacity-75\"\r\n                  onClick={() => setExpandedTaskId(expandedTaskId === task._id ? null : task._id)}\r\n                >\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-3 mb-2\">\r\n                        <span className={`px-3 py-1 rounded-full text-xs font-bold ${getStatusColor(task.status)}`}>\r\n                          {task.status}\r\n                        </span>\r\n                        <span className={`px-3 py-1 rounded-full text-xs font-bold ${getPriorityColor(task.priority)}`}>\r\n                          {getPriorityIcon(task.priority)} {task.priority}\r\n                        </span>\r\n                      </div>\r\n                      <h3 className={`text-xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                        {task.title}\r\n                      </h3>\r\n                      {task.description && (\r\n                        <p className={`text-sm mt-2 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                          {task.description}\r\n                        </p>\r\n                      )}\r\n                      {task.dueDate && (\r\n                        <p className={`text-sm mt-2 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                          üìÖ Due: {new Date(task.dueDate).toLocaleDateString()}\r\n                        </p>\r\n                      )}\r\n                      {task.subtasks && task.subtasks.length > 0 && (\r\n                        <p className={`text-sm mt-2 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                          Subtasks: {task.subtasks.filter(s => s.completed).length}/{task.subtasks.length}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex gap-2 ml-4 flex-wrap\">\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleEditTask(task);\r\n                        }}\r\n                        className={`px-4 py-2 rounded-lg font-medium transition-all ${isDarkMode ? 'bg-gray-800 hover:bg-gray-700 text-gray-200' : 'bg-gray-100 hover:bg-gray-200'}`}\r\n                      >\r\n                        ‚úèÔ∏è Edit\r\n                      </button>\r\n                      {user?.role === 'admin' && (\r\n                        <button\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            // Show admin edit modal with all fields\r\n                            setEditingTask(task);\r\n                            setNewTask({\r\n                              ...task,\r\n                              dueDate: task.dueDate ? new Date(task.dueDate).toISOString().split('T')[0] : '',\r\n                            });\r\n                            setShowModal(true);\r\n                          }}\r\n                          className=\"px-4 py-2 rounded-lg font-medium transition-all bg-red-600 hover:bg-red-700 text-white\"\r\n                        >\r\n                          üîß Admin Edit\r\n                        </button>\r\n                      )}\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleDeleteTask(task._id);\r\n                        }}\r\n                        className={`px-4 py-2 rounded-lg font-medium transition-all ${isDarkMode ? 'bg-red-900/20 hover:bg-red-900/30 text-red-400' : 'bg-red-100/50 hover:bg-red-100'}`}\r\n                      >\r\n                        üóëÔ∏è Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Expanded View */}\r\n                {expandedTaskId === task._id && (\r\n                  <div className={`border-t ${isDarkMode ? 'border-gray-700 bg-gray-800/50' : 'border-gray-200 bg-gray-50'} p-6`}>\r\n                    {/* Subtasks */}\r\n                    {task.subtasks && task.subtasks.length > 0 && (\r\n                      <div className=\"mb-6\">\r\n                        <h4 className={`font-bold mb-3 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                          üìù Subtasks\r\n                        </h4>\r\n                        <div className=\"space-y-2\">\r\n                          {task.subtasks.map((subtask, idx) => (\r\n                            <div key={idx} className=\"flex items-center gap-3\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                checked={subtask.completed || false}\r\n                                readOnly\r\n                                className=\"w-5 h-5\"\r\n                              />\r\n                              <span className={subtask.completed ? 'line-through' : ''}>\r\n                                {subtask.title}\r\n                              </span>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Comments */}\r\n                    {task.comments && task.comments.length > 0 && (\r\n                      <div>\r\n                        <h4 className={`font-bold mb-3 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                          üí¨ Comments ({task.comments.length})\r\n                        </h4>\r\n                        <div className=\"space-y-3\">\r\n                          {task.comments.map((comment, idx) => (\r\n                            <div\r\n                              key={idx}\r\n                              className={`p-3 rounded-lg ${isDarkMode ? 'bg-gray-700/30' : 'bg-white'}`}\r\n                            >\r\n                              <p className={isDarkMode ? 'text-gray-300' : 'text-gray-700'}>\r\n                                {comment.text}\r\n                              </p>\r\n                              <p className={`text-xs mt-1 ${isDarkMode ? 'text-gray-500' : 'text-gray-500'}`}>\r\n                                {new Date(comment.timestamp).toLocaleString()}\r\n                              </p>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className={`text-center py-12 rounded-xl ${isDarkMode ? 'bg-gray-900 border border-gray-700' : 'bg-gray-50 border border-gray-200'}`}>\r\n            <p className={`text-lg ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n              No tasks found. {filter !== 'all' && 'Try adjusting your filters.'}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div\r\n            className={`${isDarkMode ? 'bg-gray-900' : 'bg-white'} rounded-2xl max-w-2xl w-full max-h-96 overflow-y-auto`}\r\n          >\r\n            <div className=\"p-6\">\r\n              <div className=\"flex justify-between items-center mb-6\">\r\n                <h2 className={`text-2xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                  {editingTask ? 'Edit Task' : 'Create New Task'}\r\n                </h2>\r\n                <button\r\n                  onClick={() => setShowModal(false)}\r\n                  className=\"text-2xl\"\r\n                >\r\n                  ‚úï\r\n                </button>\r\n              </div>\r\n\r\n              <form onSubmit={handleAddTask} className=\"space-y-4\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Task Title\"\r\n                  value={newTask.title}\r\n                  onChange={(e) => setNewTask({ ...newTask, title: e.target.value })}\r\n                  className={`w-full px-4 py-2 rounded-lg border ${isDarkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-200'} focus:outline-none focus:border-[#FF6523]`}\r\n                  required\r\n                />\r\n\r\n                <textarea\r\n                  placeholder=\"Description\"\r\n                  value={newTask.description}\r\n                  onChange={(e) => setNewTask({ ...newTask, description: e.target.value })}\r\n                  className={`w-full px-4 py-2 rounded-lg border ${isDarkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-200'} focus:outline-none focus:border-[#FF6523]`}\r\n                  rows={3}\r\n                />\r\n\r\n                <div className={`grid ${user?.role === 'admin' ? 'grid-cols-4' : 'grid-cols-3'} gap-4`}>\r\n                  <select\r\n                    value={newTask.status}\r\n                    onChange={(e) => setNewTask({ ...newTask, status: e.target.value })}\r\n                    className={`px-4 py-2 rounded-lg border ${isDarkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-200'} focus:outline-none`}\r\n                  >\r\n                    <option value=\"todo\">To Do</option>\r\n                    <option value=\"in-progress\">In Progress</option>\r\n                    <option value=\"review\">Review</option>\r\n                    <option value=\"completed\">Completed</option>\r\n                  </select>\r\n\r\n                  <select\r\n                    value={newTask.priority}\r\n                    onChange={(e) => setNewTask({ ...newTask, priority: e.target.value })}\r\n                    className={`px-4 py-2 rounded-lg border ${isDarkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-200'} focus:outline-none`}\r\n                  >\r\n                    <option value=\"low\">Low</option>\r\n                    <option value=\"medium\">Medium</option>\r\n                    <option value=\"high\">High</option>\r\n                    <option value=\"critical\">Critical</option>\r\n                  </select>\r\n\r\n                  <input\r\n                    type=\"date\"\r\n                    value={newTask.dueDate}\r\n                    onChange={(e) => setNewTask({ ...newTask, dueDate: e.target.value })}\r\n                    className={`px-4 py-2 rounded-lg border ${isDarkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-200'} focus:outline-none`}\r\n                  />\r\n                  {user?.role === 'admin' && (\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"Est. Hours\"\r\n                      value={newTask.estimatedHours || ''}\r\n                      onChange={(e) => setNewTask({ ...newTask, estimatedHours: parseFloat(e.target.value) || 0 })}\r\n                      className={`px-4 py-2 rounded-lg border ${isDarkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-200'} focus:outline-none`}\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                {user?.role === 'admin' && (\r\n                  <div className=\"grid grid-cols-2 gap-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\">\r\n                    <div>\r\n                      <label className={`text-sm font-semibold ${isDarkMode ? 'text-red-400' : 'text-red-700'}`}>\r\n                        Estimated Hours\r\n                      </label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={newTask.estimatedHours || 0}\r\n                        onChange={(e) => setNewTask({ ...newTask, estimatedHours: parseFloat(e.target.value) || 0 })}\r\n                        className={`w-full px-4 py-2 rounded-lg border mt-1 ${isDarkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-200'}`}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className={`text-sm font-semibold ${isDarkMode ? 'text-red-400' : 'text-red-700'}`}>\r\n                        Actual Hours\r\n                      </label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={newTask.actualHours || 0}\r\n                        onChange={(e) => setNewTask({ ...newTask, actualHours: parseFloat(e.target.value) || 0 })}\r\n                        className={`w-full px-4 py-2 rounded-lg border mt-1 ${isDarkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-200'}`}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAddSubtask}\r\n                  className={`px-4 py-2 rounded-lg font-medium ${isDarkMode ? 'bg-gray-800 hover:bg-gray-700' : 'bg-gray-100 hover:bg-gray-200'}`}\r\n                >\r\n                  + Add Subtask\r\n                </button>\r\n\r\n                {newTask.subtasks && newTask.subtasks.map((subtask, idx) => (\r\n                  <div key={idx} className=\"flex gap-2\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder={`Subtask ${idx + 1}`}\r\n                      value={subtask.title}\r\n                      onChange={(e) => handleUpdateSubtask(idx, { ...subtask, title: e.target.value })}\r\n                      className={`flex-1 px-4 py-2 rounded-lg border ${isDarkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-200'} focus:outline-none`}\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleRemoveSubtask(idx)}\r\n                      className=\"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600\"\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n\r\n                <div className=\"flex gap-4 pt-4\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"flex-1 px-6 py-3 bg-gradient-to-r from-[#FF6523] to-[#9C4CE0] text-white font-semibold rounded-xl hover:shadow-lg transition-all\"\r\n                  >\r\n                    {editingTask ? 'Update Task' : 'Create Task'}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowModal(false)}\r\n                    className={`flex-1 px-6 py-3 rounded-xl font-semibold ${isDarkMode ? 'bg-gray-800 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300'}`}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}