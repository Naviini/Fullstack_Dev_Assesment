{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{invitationsAPI}from'../services/api';import Navbar from'../components/Navbar';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function InvitationAcceptance(){var _invitation$project;const{invitationId,token}=useParams();const navigate=useNavigate();const[loading,setLoading]=useState(true);const[message,setMessage]=useState('');const[error,setError]=useState('');const[invitation,setInvitation]=useState(null);useEffect(()=>{acceptInvitation();},[invitationId,token]);const acceptInvitation=async()=>{try{setLoading(true);// Call the accept invitation API\nconst response=await invitationsAPI.acceptInvitation(invitationId);setInvitation(response.data);setMessage('✅ Invitation accepted successfully! You are now a member of the project.');// Redirect to project after 2 seconds\nsetTimeout(()=>{var _response$data,_response$data$projec;if((_response$data=response.data)!==null&&_response$data!==void 0&&(_response$data$projec=_response$data.project)!==null&&_response$data$projec!==void 0&&_response$data$projec._id){navigate(\"/projects/\".concat(response.data.project._id));}else{navigate('/dashboard');}},2000);}catch(err){var _response,_response$data2;console.error('Error accepting invitation:',err);setError(((_response=err.response)===null||_response===void 0?void 0:(_response$data2=_response.data)===null||_response$data2===void 0?void 0:_response$data2.message)||'Failed to accept invitation. The invitation may have expired or is invalid.');setLoading(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-indigo-50 to-blue-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl p-12 max-w-md w-full text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 mx-auto bg-indigo-100 rounded-full flex items-center justify-center mb-4\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl\",children:\"\\u23F3\"})}):error?/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl\",children:\"\\u274C\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl\",children:\"\\u2705\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-4\",children:loading?'Processing Invitation...':error?'Invitation Failed':'Welcome!'}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"Accepting your invitation to the project...\"}),message&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:message}),invitation&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-indigo-50 rounded-lg p-4 text-left\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Project:\"}),\" \",((_invitation$project=invitation.project)===null||_invitation$project===void 0?void 0:_invitation$project.name)||'Project']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Role:\"}),\" \",invitation.role]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Redirecting to project in 2 seconds...\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-lg mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-indigo-700 transition-colors\",children:\"Go to Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Please contact the project owner to resend the invitation.\"})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","invitationsAPI","Navbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InvitationAcceptance","_invitation$project","invitationId","token","navigate","loading","setLoading","message","setMessage","error","setError","invitation","setInvitation","acceptInvitation","response","data","setTimeout","_response$data","_response$data$projec","project","_id","concat","err","_response","_response$data2","console","children","className","name","role","onClick"],"sources":["C:/Users/indur/Desktop/project managmnet - Copy/project-management-system/frontend/src/pages/InvitationAcceptance.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { invitationsAPI } from '../services/api';\nimport Navbar from '../components/Navbar';\n\ninterface Invitation {\n  _id?: string;\n  project?: { _id: string; name: string };\n  role?: string;\n}\n\nexport default function InvitationAcceptance() {\n  const { invitationId, token } = useParams<{ invitationId: string; token: string }>();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n  const [invitation, setInvitation] = useState<Invitation | null>(null);\n\n  useEffect(() => {\n    acceptInvitation();\n  }, [invitationId, token]);\n\n  const acceptInvitation = async () => {\n    try {\n      setLoading(true);\n      \n      // Call the accept invitation API\n      const response = await invitationsAPI.acceptInvitation(invitationId!);\n      \n      setInvitation(response.data);\n      setMessage('✅ Invitation accepted successfully! You are now a member of the project.');\n      \n      // Redirect to project after 2 seconds\n      setTimeout(() => {\n        if (response.data?.project?._id) {\n          navigate(`/projects/${response.data.project._id}`);\n        } else {\n          navigate('/dashboard');\n        }\n      }, 2000);\n    } catch (err) {\n      console.error('Error accepting invitation:', err);\n      setError((err as any).response?.data?.message || 'Failed to accept invitation. The invitation may have expired or is invalid.');\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 to-blue-50 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-2xl shadow-2xl p-12 max-w-md w-full text-center\">\n          <div className=\"mb-8\">\n            <div className=\"w-20 h-20 mx-auto bg-indigo-100 rounded-full flex items-center justify-center mb-4\">\n              {loading ? (\n                <div className=\"animate-spin\">\n                  <span className=\"text-4xl\">⏳</span>\n                </div>\n              ) : error ? (\n                <span className=\"text-4xl\">❌</span>\n              ) : (\n                <span className=\"text-4xl\">✅</span>\n              )}\n            </div>\n          </div>\n\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\n            {loading ? 'Processing Invitation...' : error ? 'Invitation Failed' : 'Welcome!'}\n          </h1>\n\n          {loading && (\n            <p className=\"text-gray-600 text-lg\">\n              Accepting your invitation to the project...\n            </p>\n          )}\n\n          {message && !loading && (\n            <div className=\"space-y-4\">\n              <p className=\"text-gray-600 text-lg\">{message}</p>\n              {invitation && (\n                <div className=\"bg-indigo-50 rounded-lg p-4 text-left\">\n                  <p className=\"text-sm text-gray-700\">\n                    <strong>Project:</strong> {invitation.project?.name || 'Project'}\n                  </p>\n                  <p className=\"text-sm text-gray-700\">\n                    <strong>Role:</strong> {invitation.role}\n                  </p>\n                </div>\n              )}\n              <p className=\"text-sm text-gray-500\">\n                Redirecting to project in 2 seconds...\n              </p>\n            </div>\n          )}\n\n          {error && (\n            <div className=\"space-y-4\">\n              <p className=\"text-red-600 text-lg mb-4\">{error}</p>\n              <button\n                onClick={() => navigate('/dashboard')}\n                className=\"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-indigo-700 transition-colors\"\n              >\n                Go to Dashboard\n              </button>\n              <p className=\"text-sm text-gray-500\">\n                Please contact the project owner to resend the invitation.\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}