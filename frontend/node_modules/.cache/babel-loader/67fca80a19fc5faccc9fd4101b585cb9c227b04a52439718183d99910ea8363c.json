{"ast":null,"code":"import io from'socket.io-client';let socket=null;const socketService={/**\r\n   * Initialize WebSocket connection\r\n   * @param {string} token - JWT authentication token\r\n   */connect(token){const serverUrl=process.env.REACT_APP_API_URL||'http://localhost:5001';socket=io(serverUrl,{auth:{token:token},reconnection:true,reconnectionDelay:1000,reconnectionDelayMax:5000,reconnectionAttempts:5});socket.on('connect',()=>{console.log('WebSocket connected:',socket.id);});socket.on('connect_error',error=>{console.error('WebSocket connection error:',error);});socket.on('disconnect',()=>{console.log('WebSocket disconnected');});return socket;},/**\r\n   * Disconnect WebSocket\r\n   */disconnect(){if(socket){socket.disconnect();}},/**\r\n   * Join a project room for real-time updates\r\n   * @param {string} projectId - Project ID\r\n   */joinProject(projectId){if(socket){socket.emit('join-project',projectId);}},/**\r\n   * Leave a project room\r\n   * @param {string} projectId - Project ID\r\n   */leaveProject(projectId){if(socket){socket.emit('leave-project',projectId);}},/**\r\n   * Notify when a task is updated\r\n   * @param {string} projectId - Project ID\r\n   * @param {string} taskId - Task ID\r\n   * @param {object} changes - Changes made to the task\r\n   */emitTaskUpdate(projectId,taskId,changes){if(socket){socket.emit('task-updated',{projectId,taskId,changes});}},/**\r\n   * Send a collaboration message\r\n   * @param {string} projectId - Project ID\r\n   * @param {string} message - Message content\r\n   */sendCollaborationMessage(projectId,message){if(socket){socket.emit('collaboration-message',{projectId,message});}},/**\r\n   * Notify when project status changes\r\n   * @param {string} projectId - Project ID\r\n   * @param {string} status - New project status\r\n   */emitProjectStatusChange(projectId,status){if(socket){socket.emit('project-status-changed',{projectId,status});}},/**\r\n   * Listen for task update notifications\r\n   * @param {function} callback - Callback function\r\n   */onTaskUpdate(callback){if(socket){socket.on('task-update-notification',callback);}},/**\r\n   * Listen for new collaboration messages\r\n   * @param {function} callback - Callback function\r\n   */onNewMessage(callback){if(socket){socket.on('new-message',callback);}},/**\r\n   * Listen for project status updates\r\n   * @param {function} callback - Callback function\r\n   */onProjectStatusUpdate(callback){if(socket){socket.on('project-status-update',callback);}},/**\r\n   * Listen for user join notifications\r\n   * @param {function} callback - Callback function\r\n   */onUserJoined(callback){if(socket){socket.on('user-joined',callback);}},/**\r\n   * Listen for user leave notifications\r\n   * @param {function} callback - Callback function\r\n   */onUserLeft(callback){if(socket){socket.on('user-left',callback);}},/**\r\n   * Remove event listener\r\n   * @param {string} event - Event name\r\n   * @param {function} callback - Callback function\r\n   */off(event,callback){if(socket){socket.off(event,callback);}},/**\r\n   * Get socket instance\r\n   */getSocket(){return socket;}};export default socketService;","map":{"version":3,"names":["io","socket","socketService","connect","token","serverUrl","process","env","REACT_APP_API_URL","auth","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","on","console","log","id","error","disconnect","joinProject","projectId","emit","leaveProject","emitTaskUpdate","taskId","changes","sendCollaborationMessage","message","emitProjectStatusChange","status","onTaskUpdate","callback","onNewMessage","onProjectStatusUpdate","onUserJoined","onUserLeft","off","event","getSocket"],"sources":["C:/Users/indur/Desktop/project managmnet - Copy/project-management-system/frontend/src/services/socketService.js"],"sourcesContent":["import io from 'socket.io-client';\r\n\r\nlet socket = null;\r\n\r\nconst socketService = {\r\n  /**\r\n   * Initialize WebSocket connection\r\n   * @param {string} token - JWT authentication token\r\n   */\r\n  connect(token) {\r\n    const serverUrl = process.env.REACT_APP_API_URL || 'http://localhost:5001';\r\n    socket = io(serverUrl, {\r\n      auth: {\r\n        token: token,\r\n      },\r\n      reconnection: true,\r\n      reconnectionDelay: 1000,\r\n      reconnectionDelayMax: 5000,\r\n      reconnectionAttempts: 5,\r\n    });\r\n\r\n    socket.on('connect', () => {\r\n      console.log('WebSocket connected:', socket.id);\r\n    });\r\n\r\n    socket.on('connect_error', (error) => {\r\n      console.error('WebSocket connection error:', error);\r\n    });\r\n\r\n    socket.on('disconnect', () => {\r\n      console.log('WebSocket disconnected');\r\n    });\r\n\r\n    return socket;\r\n  },\r\n\r\n  /**\r\n   * Disconnect WebSocket\r\n   */\r\n  disconnect() {\r\n    if (socket) {\r\n      socket.disconnect();\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Join a project room for real-time updates\r\n   * @param {string} projectId - Project ID\r\n   */\r\n  joinProject(projectId) {\r\n    if (socket) {\r\n      socket.emit('join-project', projectId);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Leave a project room\r\n   * @param {string} projectId - Project ID\r\n   */\r\n  leaveProject(projectId) {\r\n    if (socket) {\r\n      socket.emit('leave-project', projectId);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Notify when a task is updated\r\n   * @param {string} projectId - Project ID\r\n   * @param {string} taskId - Task ID\r\n   * @param {object} changes - Changes made to the task\r\n   */\r\n  emitTaskUpdate(projectId, taskId, changes) {\r\n    if (socket) {\r\n      socket.emit('task-updated', {\r\n        projectId,\r\n        taskId,\r\n        changes,\r\n      });\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Send a collaboration message\r\n   * @param {string} projectId - Project ID\r\n   * @param {string} message - Message content\r\n   */\r\n  sendCollaborationMessage(projectId, message) {\r\n    if (socket) {\r\n      socket.emit('collaboration-message', {\r\n        projectId,\r\n        message,\r\n      });\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Notify when project status changes\r\n   * @param {string} projectId - Project ID\r\n   * @param {string} status - New project status\r\n   */\r\n  emitProjectStatusChange(projectId, status) {\r\n    if (socket) {\r\n      socket.emit('project-status-changed', {\r\n        projectId,\r\n        status,\r\n      });\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Listen for task update notifications\r\n   * @param {function} callback - Callback function\r\n   */\r\n  onTaskUpdate(callback) {\r\n    if (socket) {\r\n      socket.on('task-update-notification', callback);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Listen for new collaboration messages\r\n   * @param {function} callback - Callback function\r\n   */\r\n  onNewMessage(callback) {\r\n    if (socket) {\r\n      socket.on('new-message', callback);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Listen for project status updates\r\n   * @param {function} callback - Callback function\r\n   */\r\n  onProjectStatusUpdate(callback) {\r\n    if (socket) {\r\n      socket.on('project-status-update', callback);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Listen for user join notifications\r\n   * @param {function} callback - Callback function\r\n   */\r\n  onUserJoined(callback) {\r\n    if (socket) {\r\n      socket.on('user-joined', callback);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Listen for user leave notifications\r\n   * @param {function} callback - Callback function\r\n   */\r\n  onUserLeft(callback) {\r\n    if (socket) {\r\n      socket.on('user-left', callback);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Remove event listener\r\n   * @param {string} event - Event name\r\n   * @param {function} callback - Callback function\r\n   */\r\n  off(event, callback) {\r\n    if (socket) {\r\n      socket.off(event, callback);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get socket instance\r\n   */\r\n  getSocket() {\r\n    return socket;\r\n  },\r\n};\r\n\r\nexport default socketService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}